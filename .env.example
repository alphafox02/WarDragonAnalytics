# WarDragon Analytics Environment Configuration
# Copy this file to .env and update with your actual values
# NEVER commit .env to version control!

# =============================================================================
# Database Configuration
# =============================================================================
# PostgreSQL/TimescaleDB password
# SECURITY: Use a strong password (min 20 characters, alphanumeric + special chars)
DB_PASSWORD=CHANGEME_STRONG_PASSWORD_HERE

# =============================================================================
# Grafana Configuration
# =============================================================================
# Grafana admin username
GRAFANA_USER=admin

# Grafana admin password
# SECURITY: Use a strong password (min 20 characters, alphanumeric + special chars)
GRAFANA_PASSWORD=CHANGEME_GRAFANA_PASSWORD_HERE

# Grafana secret key for signing cookies
# SECURITY: Generate with: openssl rand -base64 32
GRAFANA_SECRET_KEY=CHANGEME_GRAFANA_SECRET_KEY_HERE

# Grafana root URL (for reverse proxy support)
GRAFANA_ROOT_URL=http://localhost:3000

# Grafana port (default: 3000)
GRAFANA_PORT=3000

# Grafana log level (debug, info, warn, error)
GRAFANA_LOG_LEVEL=info

# =============================================================================
# Web API Configuration
# =============================================================================
# Web UI port (default: 8090)
# NOTE: 8080 is used by dump1090/readsb on WarDragon kits for ADS-B
WEB_PORT=8090

# CORS origins (comma-separated, use * for all origins in dev only)
# SECURITY: In production, specify exact origins: http://example.com,https://example.com
CORS_ORIGINS=*

# Maximum query range in hours (prevents excessive queries)
MAX_QUERY_RANGE_HOURS=168

# =============================================================================
# Collector Configuration
# =============================================================================
# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Polling intervals (in seconds)
POLL_INTERVAL_DRONES=5
POLL_INTERVAL_STATUS=30

# Retry configuration for failed API calls
MAX_RETRIES=3
RETRY_BACKOFF_FACTOR=2

# =============================================================================
# Volume Configuration
# =============================================================================
# Path to store persistent volumes (default: ./volumes)
# Can be absolute path for production deployment
VOLUMES_PATH=./volumes

# =============================================================================
# AI Assistant / LLM Configuration (Optional)
# =============================================================================
# The AI Assistant uses Ollama to provide natural language queries over your data.
# You need to run Ollama separately - see docs/ollama-setup.md for instructions.

# Ollama API URL (default: http://localhost:11434)
# If running Ollama on another machine, use its IP address
OLLAMA_URL=http://localhost:11434

# Ollama model to use for queries
# Recommended models (in order of capability):
#   - llama3.1:8b   (fastest, good for most queries, ~4GB VRAM)
#   - llama3.1:70b  (best quality, needs ~40GB VRAM)
#   - mistral:7b    (fast alternative, ~4GB VRAM)
#   - codellama:13b (good for technical queries, ~8GB VRAM)
OLLAMA_MODEL=llama3.1:8b

# Request timeout in seconds (increase for slower hardware)
OLLAMA_TIMEOUT=60

# Maximum tokens for response (higher = longer responses but slower)
OLLAMA_MAX_TOKENS=2048

# Temperature for response generation (0.0 = deterministic, 1.0 = creative)
# Lower values (0.1-0.3) recommended for data queries
OLLAMA_TEMPERATURE=0.1

# =============================================================================
# Production Deployment Notes
# =============================================================================
# 1. Generate strong passwords:
#    openssl rand -base64 32
#
# 2. Create volumes directory:
#    mkdir -p ./volumes/timescale-data ./volumes/grafana-data
#    chmod 700 ./volumes/timescale-data ./volumes/grafana-data
#
# 3. For production, bind to localhost only (already done in docker-compose.yml):
#    - TimescaleDB: 127.0.0.1:5432:5432
#    - Use reverse proxy (nginx/traefik) for web/grafana with SSL
#
# 4. Enable UFW/firewall:
#    sudo ufw allow 8090/tcp  # Web UI (or via reverse proxy)
#    sudo ufw allow 3000/tcp  # Grafana (or via reverse proxy)
#
# 5. Regular backups:
#    docker exec wardragon-timescaledb pg_dump -U wardragon wardragon > backup.sql
#
# 6. Monitor logs:
#    docker-compose logs -f collector
#    docker-compose logs -f web
#
# 7. Update CORS_ORIGINS for production with specific domains
#
# 8. Consider setting up log rotation for application logs
